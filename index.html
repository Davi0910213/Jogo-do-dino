<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Block Dash - Dino & Cacto com Pause</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background-color: #222;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    height: 100vh;
    font-family: Arial, sans-serif;
  }
  #game {
    position: relative;
    width: 900px;
    height: 300px;
    background-color: #444;
    overflow: hidden;
    border: 2px solid #fff;
  }
  #player {
    position: absolute;
    bottom: 40px;
    left: 80px;
    width: 50px;
    height: 50px;
    z-index: 10;
  }
  #player svg {
    width: 100%;
    height: 100%;
    shape-rendering: crispEdges;
  }
  #obstacle {
    position: absolute;
    bottom: 40px;
    width: 50px;
    height: 50px;
    left: 900px;
    z-index: 10;
  }
  #obstacle svg {
    width: 100%;
    height: 100%;
    shape-rendering: crispEdges;
  }
  #score {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 24px;
    z-index: 20;
  }
  #startButton, #pauseButton {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 15px 30px;
    font-size: 20px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background-color: #0a0;
    color: white;
    z-index: 30;
  }
  #pauseButton {
    top: 15px;
    left: auto;
    right: 15px;
    transform: none;
    display: none;
    background-color: #cc0000;
  }
</style>
</head>
<body>

<div id="game">
  <div id="score">Score: 0</div>
  
  <div id="player">
    <!-- Dinossauro pixel art -->
    <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" shape-rendering="crispEdges">
      <!-- Corpo -->
      <rect x="15" y="25" width="30" height="20" fill="#4CAF50" />
      <!-- Cabeça -->
      <rect x="10" y="20" width="10" height="15" fill="#4CAF50" />
      <!-- Olho -->
      <rect x="16" y="23" width="3" height="3" fill="#000" />
      <!-- Perna traseira -->
      <rect x="20" y="45" width="8" height="10" fill="#388E3C" />
      <!-- Perna dianteira -->
      <rect x="35" y="45" width="8" height="10" fill="#388E3C" />
      <!-- Cauda -->
      <rect x="45" y="30" width="10" height="5" fill="#4CAF50" />
      <rect x="55" y="25" width="5" height="5" fill="#4CAF50" />
    </svg>
  </div>

  <div id="obstacle">
    <!-- Cacto pixel art vermelho -->
    <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" shape-rendering="crispEdges">
      <!-- Base do cacto -->
      <rect x="20" y="35" width="24" height="15" fill="#D32F2F" />
      <!-- Braços do cacto -->
      <rect x="15" y="25" width="10" height="8" fill="#D32F2F" />
      <rect x="39" y="25" width="10" height="8" fill="#D32F2F" />
      <!-- Tronco central -->
      <rect x="28" y="15" width="8" height="20" fill="#D32F2F" />
      <!-- Topo arredondado -->
      <rect x="26" y="10" width="12" height="8" fill="#D32F2F" rx="3" ry="3"/>
    </svg>
  </div>

  <button id="startButton">Começar Jogo</button>
  <button id="pauseButton">Pausar</button>
</div>

<script>
  const player = document.getElementById('player');
  const obstacle = document.getElementById('obstacle');
  const scoreDisplay = document.getElementById('score');
  const startButton = document.getElementById('startButton');
  const pauseButton = document.getElementById('pauseButton');

  const gameWidth = 900;
  const groundLevel = 40;
  const playerLeft = 80;
  const playerWidth = 50;
  const playerHeight = 50;
  const obstacleWidth = 50;
  const obstacleHeight = 50;

  const playerHitbox = { width: 35, height: 40 };
  const obstacleHitbox = { width: 30, height: 40 };

  let isJumping = false;
  let jumpHeight = 0;
  let jumpSpeed = 0;
  const gravity = 0.7;

  let obstacleSpeed = 7;
  let obstaclePos = gameWidth;
  let score = 0;
  let gameOver = false;
  let gameStarted = false;
  let paused = false;
  let animationFrameId;

  function jump() {
    if (!isJumping && !paused) {
      isJumping = true;
      jumpSpeed = 12;  // Aumentar a dificuldade reduzindo a altura do pulo
    }
  }

  function keyHandler(e) {
    if (!gameStarted || paused) return;
    if ((e.code === 'ArrowUp' || e.key.toLowerCase() === 'w') && !gameOver) {
      jump();
    }
  }

  startButton.addEventListener('click', () => {
    gameStarted = true;
    startButton.style.display = 'none';
    pauseButton.style.display = 'block';
    window.addEventListener('keydown', keyHandler);
    update();
  });

  pauseButton.addEventListener('click', () => {
    if (!paused) {
      paused = true;
      pauseButton.textContent = 'Retomar';
      if (animationFrameId) cancelAnimationFrame(animationFrameId);
    } else {
      paused = false;
      pauseButton.textContent = 'Pausar';
      update();
    }
  });

  function update() {
    if (gameOver || !gameStarted || paused) return;

    if (isJumping) {
      jumpHeight += jumpSpeed;
      jumpSpeed -= gravity;

      if (jumpHeight <= 0) {
        jumpHeight = 0;
        isJumping = false;
      }
    }

    player.style.bottom = groundLevel + jumpHeight + 'px';

    obstaclePos -= obstacleSpeed;
    if (obstaclePos < -obstacleWidth) {
      obstaclePos = gameWidth;
      score++;
      scoreDisplay.textContent = 'Score: ' + score;

      if (score % 3 === 0) {  // Tornar mais difícil mais rapidamente
        obstacleSpeed += 1;
      }
    }
    obstacle.style.left = obstaclePos + 'px';

    // Hitbox centralizadas
    const playerHitboxX = playerLeft + (playerWidth - playerHitbox.width) / 2;
    const playerHitboxY = groundLevel + jumpHeight;

    const obstacleHitboxX = obstaclePos + (obstacleWidth - obstacleHitbox.width) / 2;
    const obstacleHitboxY = groundLevel;

    const horizontalOverlap =
      playerHitboxX < obstacleHitboxX + obstacleHitbox.width &&
      playerHitboxX + playerHitbox.width > obstacleHitboxX;

    const verticalOverlap =
      playerHitboxY < obstacleHitboxY + obstacleHitbox.height &&
      playerHitboxY + playerHitbox.height > obstacleHitboxY;

    if (horizontalOverlap && verticalOverlap) {
      gameOver = true;
      alert('Game Over! Seu score: ' + score);
      location.reload();
    }

    animationFrameId = requestAnimationFrame(update);
  }
</script>

</body>
</html>
